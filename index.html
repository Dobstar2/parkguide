<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Charlie's Hidden Park Guide</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Park Guide">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="manifest" href="manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #667eea;
      --secondary: #764ba2;
      --accent: #f093fb;
      --success: #4ecdc4;
      --warning: #ffe66d;
      --bg-dark: #0f0f23;
      --bg-card: rgba(255, 255, 255, 0.1);
      --text-primary: #ffffff;
      --text-secondary: rgba(255, 255, 255, 0.8);
      --glass-bg: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.2);
      --shadow-glow: 0 8px 32px rgba(102, 126, 234, 0.3);
      --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.1);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: var(--text-primary);
      min-height: 100vh;
      min-height: 100dvh;
      overflow-x: hidden;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      -webkit-tap-highlight-color: transparent;
    }
    .bg-animated {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      background-size: 400% 400%; animation: gradientShift 15s ease infinite;
    }
    .bg-animated::before {
      content: '';
      position: absolute; top: 0; left: 0; right: 0; bottom: 0;
      background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                  radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                  radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
      animation: floatingOrbs 20s ease-in-out infinite;
    }
    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    @keyframes floatingOrbs {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(30px, -30px) rotate(120deg); }
      66% { transform: translate(-20px, 20px) rotate(240deg); }
    }
    .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
    .particle {
      position: absolute; width: 4px; height: 4px; background: rgba(255, 255, 255, 0.6); border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
      50% { transform: translateY(-20px) rotate(180deg); opacity: 0.5; }
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 2rem; position: relative; z-index: 2; }
    .glass-card {
      background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
      border-radius: 20px; box-shadow: var(--shadow-glow); transition: all 0.3s ease;
    }
    .glass-card:hover {
      transform: translateY(-5px); box-shadow: 0 12px 40px rgba(102, 126, 234, 0.4);
    }
    .page { display: none; animation: fadeInUp 0.6s ease-out; }
    .page.active { display: block; }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px);}
      to { opacity: 1; transform: translateY(0);}
    }
    h1 {
      font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 900; text-align: center; margin-bottom: 1rem;
      background: linear-gradient(135deg, #fff 0%, #f093fb 100%);
      background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      text-shadow: 0 0 30px rgba(240, 147, 251, 0.5);
    }
    .subtitle { text-align: center; font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-secondary);}
    .author { text-align: center; font-size: 1rem; font-weight: 400; margin-bottom: 3rem; color: var(--text-secondary); line-height: 1.6;}
    .main-menu-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 3rem;
    }
    .menu-btn {
      background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
      border-radius: 20px; padding: 2rem; font-size: 1.3rem; font-weight: 700; color: var(--text-primary);
      cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center;
      gap: 1rem; min-height: 120px; position: relative; overflow: hidden; touch-action: manipulation;
    }
    .menu-btn::before {
      content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); transition: left 0.5s;
    }
    .menu-btn:hover::before { left: 100%; }
    .menu-btn:hover {
      transform: translateY(-8px); box-shadow: 0 15px 45px rgba(102, 126, 234, 0.4); border-color: rgba(255, 255, 255, 0.3);
    }
    .menu-btn:active { transform: translateY(-5px) scale(0.98); }
    .menu-btn .emoji { font-size: 2.5rem; filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3)); }
    .reset-btn {
      margin: 4rem auto 0; background: linear-gradient(135deg, var(--accent) 0%, var(--secondary) 100%);
      color: white; border: none; border-radius: 15px; font-size: 1.1rem; padding: 1rem 2.5rem; font-weight: 600;
      cursor: pointer; transition: all 0.3s ease; display: block; box-shadow: var(--shadow-glow); touch-action: manipulation;
    }
    .reset-btn:hover {
      transform: translateY(-3px); box-shadow: 0 10px 35px rgba(240, 147, 251, 0.4);
    }
    .park-title {
      font-size: clamp(2rem, 4vw, 3rem); font-weight: 900; text-align: center; margin: 2rem 0;
      background: linear-gradient(135deg, #fff 0%, var(--accent) 100%);
      background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .back-btn {
      background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
      border-radius: 12px; color: var(--text-primary); font-size: 1rem; font-weight: 600; padding: 0.8rem 1.5rem;
      cursor: pointer; transition: all 0.3s ease; margin-bottom: 2rem; touch-action: manipulation;
    }
    .back-btn:hover { transform: translateX(-5px); box-shadow: var(--shadow-soft);}
    .section-header {
      font-size: 1.8rem; font-weight: 800; margin: 3rem 0 2rem 0; color: var(--text-primary); text-align: center; position: relative;
    }
    .section-header::after {
      content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%);
      width: 60px; height: 3px; background: linear-gradient(90deg, var(--accent), var(--primary)); border-radius: 2px;
    }
    .land-header {
      font-size: 1.3rem; font-weight: 700; margin: 2rem 0 1rem 0; color: var(--warning); padding-left: 1rem;
      border-left: 4px solid var(--success); border-radius: 2px;
    }
    .rides-grid, .secrets-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;
    }
    .secret-card, .ride-card {
      background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
      border-radius: 16px; padding: 1.5rem; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; touch-action: manipulation;
    }
    .secret-card::before, .ride-card::before {
      content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
      background: linear-gradient(180deg, var(--accent), var(--primary)); transition: width 0.3s ease;
    }
    .secret-card:hover::before, .ride-card:hover::before { width: 8px; }
    .secret-card:hover, .ride-card:hover {
      transform: translateY(-5px); box-shadow: 0 12px 40px rgba(102, 126, 234, 0.3); border-color: rgba(255, 255, 255, 0.3);
    }
    .secret-card.done, .ride-card.done {
      background: rgba(78, 205, 196, 0.1); border-color: var(--success); opacity: 0.7;
    }
    .secret-card.done::before, .ride-card.done::before { background: var(--success);}
    .card-content { display: flex; align-items: flex-start; gap: 1rem; }
    .card-emoji { font-size: 2rem; flex-shrink: 0; filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3)); }
    .card-info { flex: 1; }
    .card-name { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); line-height: 1.4;}
    .card-desc { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.4;}
    .done .card-name { text-decoration: line-through; color: var(--success);}
    .tick {
      position: absolute; top: 1rem; right: 1rem; font-size: 1.5rem; color: var(--success); display: none;
      filter: drop-shadow(0 0 8px rgba(78, 205, 196, 0.5));
    }
    .done .tick { display: block; animation: tickAppear 0.5s ease-out;}
    @keyframes tickAppear {
      from { transform: scale(0) rotate(-180deg); opacity: 0;}
      to { transform: scale(1) rotate(0deg); opacity: 1;}
    }
    .modal {
      position: fixed; inset: 0; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px);
      display: flex; align-items: center; justify-content: center; z-index: 1000; animation: modalFadeIn 0.3s ease-out;
    }
    @keyframes modalFadeIn { from { opacity: 0;} to { opacity: 1;} }
    .modal-content {
      background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
      border-radius: 20px; padding: 2.5rem; max-width: 400px; text-align: center; box-shadow: var(--shadow-glow); animation: modalSlideUp 0.4s ease-out;
    }
    @keyframes modalSlideUp {
      from { transform: translateY(50px); opacity: 0;}
      to { transform: translateY(0); opacity: 1;}
    }
    .modal-emoji { font-size: 3rem; margin-bottom: 1rem; display: block;}
    .modal-content p { font-size: 1rem; line-height: 1.6; margin-bottom: 2rem; color: var(--text-secondary);}
    .modal-btn {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; border: none; border-radius: 12px;
      font-size: 1.1rem; font-weight: 600; padding: 1rem 2rem; cursor: pointer; transition: all 0.3s ease; box-shadow: var(--shadow-soft);
    }
    .modal-btn:hover {
      transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }
    @media (max-width: 768px) {
      .container { padding: 1rem;}
      .main-menu-grid { grid-template-columns: 1fr; gap: 1rem;}
      .rides-grid, .secrets-grid { grid-template-columns: 1fr; gap: 1rem;}
      .menu-btn { min-height: 100px; padding: 1.5rem; font-size: 1.1rem;}
      .menu-btn .emoji { font-size: 2rem;}
    }
    @keyframes pulse { 0%, 100% { transform: scale(1);} 50% { transform: scale(1.05);} }
    .pulse-animation { animation: pulse 2s ease-in-out infinite;}
    html { scroll-behavior: smooth;}
    .shimmer {
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
      background-size: 200% 100%; animation: shimmer 2s ease-in-out infinite;
    }
    @keyframes shimmer {
      0% { background-position: -200% 0;}
      100% { background-position: 200% 0;}
    }
    /* Day Planner styles */
    .planner-flex { display: flex; gap: 2rem; flex-wrap: wrap; }
    .planner-list { flex: 1; min-width: 250px; }
    .planner-item {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      padding: 0.5rem 1rem;
      margin-bottom: 0.5rem;
      cursor: grab;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .planner-item .wait { font-size: 0.8rem; color: var(--warning); margin-left: auto; }
    .planner-schedule { flex: 2; display: flex; gap: 1rem; flex-wrap: wrap; }
.schedule-column {
      flex: 1;
      min-width: 180px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 15px;
      padding: 1rem;
    }
    .schedule-header { font-weight: 700; margin-bottom: 0.5rem; text-align: center; }
    .dropzone { min-height: 150px; }
    /* Food tracker */
    .food-controls { display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; }
    #food-search, #food-filter {
      padding: 0.5rem 1rem;
      border-radius: 12px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      color: var(--text-primary);
    }
    #food-search { flex: 1; min-width: 150px; }
    #food-filter { flex: 0 0 150px; }
    .fav {
      position: absolute;
      top: 1rem;
      left: 1rem;
      font-size: 1.5rem;
      color: var(--accent);
      display: none;
      filter: drop-shadow(0 0 8px rgba(240, 147, 251, 0.5));
    }
    .favorite .fav { display: block; }
    .favorite .card-name { color: var(--accent); }
  </style>
</head>
<body>
  <div class="bg-animated"></div>
  <div class="particles" id="particles"></div>
  
  <div class="container">
    <!-- Main Menu -->
    <div id="main-menu" class="page active">
      <h1>Hidden Park Guide</h1>
      <div class="subtitle">Disney & Universal Cool Stuff ‚Äì by Charlie</div>
      <div class="author">Tap a park below to start your magical journey. Check off rides & secrets as you discover them. Reset anytime for a fresh adventure!</div>
      
      <div class="main-menu-grid">
        <button class="menu-btn" onclick="openPark('MK')">
          <span class="emoji">üè∞</span>
          <span>Magic Kingdom</span>
        </button>
        <button class="menu-btn" onclick="openPark('EPCOT')">
          <span class="emoji">üåê</span>
          <span>EPCOT</span>
        </button>
        <button class="menu-btn" onclick="openPark('HS')">
          <span class="emoji">üé¨</span>
          <span>Hollywood Studios</span>
        </button>
        <button class="menu-btn" onclick="openPark('AK')">
          <span class="emoji">ü¶Å</span>
          <span>Animal Kingdom</span>
        </button>
        <button class="menu-btn" onclick="openPark('USF')">
          <span class="emoji">üßô‚Äç‚ôÇÔ∏è</span>
          <span>Universal Studios Florida</span>
        </button>
        <button class="menu-btn" onclick="openPark('IOA')">
          <span class="emoji">ü¶ñ</span>
          <span>Islands of Adventure</span>
        </button>
        <button class="menu-btn" onclick="openPark('EU')">
          <span class="emoji">üåå</span>
          <span>Epic Universe</span>
        </button>
        <button class="menu-btn" onclick="openFoods()">
          <span class="emoji">üçî</span>
          <span>Food Tracker</span>
        </button>
        <button class="menu-btn" onclick="openPlanner()">
          <span class="emoji">üóìÔ∏è</span>
          <span>Plan Your Day</span>
        </button>
      </div>
      
      <button class="reset-btn" onclick="resetProgress()">üîÑ Reset All Progress</button>
    </div>
    <!-- MAGIC KINGDOM -->
    <div id="park-MK" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">üè∞ Magic Kingdom</div>
      <div class="section-header">Must-Do Rides</div>
      <div class="land-header">Fantasyland</div>
      <div class="rides-grid" id="MK-rides-fantasy"></div>
      <div class="land-header">Frontierland</div>
      <div class="rides-grid" id="MK-rides-frontier"></div>
      <div class="land-header">Adventureland</div>
      <div class="rides-grid" id="MK-rides-adventure"></div>
      <div class="land-header">Liberty Square</div>
      <div class="rides-grid" id="MK-rides-liberty"></div>
      <div class="land-header">Tomorrowland</div>
      <div class="rides-grid" id="MK-rides-tomorrow"></div>
      <div class="section-header">Cool Hidden Stuff</div>
      <div class="secrets-grid" id="MK-secrets"></div>
    </div>
    <!-- HOLLYWOOD STUDIOS -->
    <div id="park-HS" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">üé¨ Hollywood Studios</div>
      <div class="section-header">Must-Do Rides</div>
      <div class="land-header">Star Wars: Galaxy's Edge</div>
      <div class="rides-grid" id="HS-rides-sw"></div>
      <div class="land-header">Toy Story Land</div>
      <div class="rides-grid" id="HS-rides-toy"></div>
      <div class="land-header">Sunset Boulevard</div>
      <div class="rides-grid" id="HS-rides-sunset"></div>
      <div class="section-header">Cool Hidden Stuff</div>
      <div class="secrets-grid" id="HS-secrets"></div>
    </div>
    <!-- ANIMAL KINGDOM -->
    <div id="park-AK" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">ü¶Å Animal Kingdom</div>
      <div class="section-header">Must-Do Rides</div>
      <div class="land-header">Pandora</div>
      <div class="rides-grid" id="AK-rides-pandora"></div>
      <div class="land-header">Africa</div>
      <div class="rides-grid" id="AK-rides-africa"></div>
      <div class="land-header">Asia</div>
      <div class="rides-grid" id="AK-rides-asia"></div>
      <div class="land-header">DinoLand U.S.A.</div>
      <div class="rides-grid" id="AK-rides-dino"></div>
      <div class="section-header">Cool Hidden Stuff</div>
      <div class="secrets-grid" id="AK-secrets"></div>
    </div>
    <!-- EPCOT -->
    <div id="park-EPCOT" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">üåê EPCOT</div>
      <div class="section-header">Must-Do Rides</div>
      <div class="land-header">World Discovery</div>
      <div class="rides-grid" id="EPCOT-rides-discovery"></div>
      <div class="land-header">World Celebration/Test Track</div>
      <div class="rides-grid" id="EPCOT-rides-test"></div>
      <div class="section-header">Cool Hidden Stuff</div>
      <div class="secrets-grid" id="EPCOT-secrets"></div>
    </div>
    <!-- UNIVERSAL STUDIOS FLORIDA -->
    <div id="park-USF" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">üßô‚Äç‚ôÇÔ∏è Universal Studios Florida</div>
      <div class="section-header">Must-Do Rides</div>
      <div class="land-header">Diagon Alley</div>
      <div class="rides-grid" id="USF-rides-diagon"></div>
      <div class="land-header">Park Connector</div>
      <div class="rides-grid" id="USF-rides-hogwarts"></div>
      <div class="section-header">Cool Hidden Stuff</div>
      <div class="secrets-grid" id="USF-secrets"></div>
    </div>
    <!-- ISLANDS OF ADVENTURE -->
    <div id="park-IOA" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">ü¶ñ Islands of Adventure</div>
      <div class="section-header">Must-Do Rides</div>
      <div class="land-header">Jurassic Park</div>
      <div class="rides-grid" id="IOA-rides-jurassic"></div>
      <div class="land-header">Hogsmeade</div>
      <div class="rides-grid" id="IOA-rides-hogsmeade"></div>
      <div class="section-header">Cool Hidden Stuff</div>
      <div class="secrets-grid" id="IOA-secrets"></div>
    </div>
    <!-- EPIC UNIVERSE -->
    <div id="park-EU" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">üåå Epic Universe</div>
      <div class="section-header">Must-Do Rides</div>
      <div class="land-header">Celestial Park</div>
      <div class="rides-grid" id="EU-rides-celestial"></div>
      <div class="land-header">Ministry of Magic</div>
      <div class="rides-grid" id="EU-rides-ministry"></div>
      <div class="land-header">Super Nintendo World</div>
      <div class="rides-grid" id="EU-rides-snw"></div>
      <div class="land-header">Isle of Berk</div>
      <div class="rides-grid" id="EU-rides-berk"></div>
      <div class="section-header">Cool Hidden Stuff</div>
      <div class="secrets-grid" id="EU-secrets"></div>
    </div>
    <!-- DAY PLANNER -->
    <div id="planner-page" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">üóìÔ∏è Plan Your Day</div>
      <div class="planner-flex">
        <div class="planner-list" id="planner-list"></div>
        <div class="planner-schedule">
          <div class="schedule-column">
            <div class="schedule-header">Morning</div>
            <div class="dropzone" id="slot-morning"></div>
          </div>
          <div class="schedule-column">
            <div class="schedule-header">Afternoon</div>
            <div class="dropzone" id="slot-afternoon"></div>
          </div>
          <div class="schedule-column">
            <div class="schedule-header">Evening</div>
            <div class="dropzone" id="slot-evening"></div>
          </div>
        </div>
      </div>
      <div class="section-header">Weather Tips</div>
      <select id="weather-select">
        <option value="sunny">Sunny</option>
        <option value="rainy">Rainy</option>
      </select>
      <ul id="weather-tips"></ul>
    </div>
    <!-- FOOD TRACKER -->
    <div id="food-page" class="page">
      <button class="back-btn" onclick="goHome()">‚Üê Back to Parks</button>
      <div class="park-title">üçî Favorite Foods & Snacks</div>
      <div class="food-controls">
        <input type="text" id="food-search" placeholder="Search snacks...">
        <select id="food-filter">
          <option value="all">All Types</option>
          <option value="sweet">Sweet</option>
          <option value="savory">Savory</option>
          <option value="drink">Drink</option>
        </select>
      </div>
      <div class="section-header">Yummy Treats</div>
      <div class="rides-grid" id="food-grid"></div>
    </div>
  </div>
  <!-- Welcome Modal -->
  <div id="welcome-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="modal-emoji">üéâ‚ú®</span>
      <p>Welcome to your magical park adventure guide!<br><br>
      Pick a park, check off rides & cool secrets, and make the most of your Disney & Universal trip.<br><br>
      <strong style="color: var(--accent);">Pro Tip:</strong> Add this to your home screen for the best experience!</p>
      <button class="modal-btn" onclick="closeModal()">Let's Begin the Magic!</button>
    </div>
  </div>
  <script>
    // Create floating particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = window.innerWidth > 768 ? 50 : 25;
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
        particlesContainer.appendChild(particle);
      }
    }
    createParticles();
    // Navigation functions
    function openPark(park) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('park-' + park).classList.add('active');
      window.scrollTo(0, 0);
    }
    function openPlanner() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('planner-page').classList.add('active');
      populatePlanner();
      initWeatherTips();
      window.scrollTo(0, 0);
    }
    function openFoods() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('food-page').classList.add('active');
      filterFoods();
      window.scrollTo(0, 0);
    }
    function goHome() {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('main-menu').classList.add('active');
      window.scrollTo(0, 0);
    }
    // Modal functions
    function showModal() {
      document.getElementById('welcome-modal').style.display = 'flex';
    }
    function closeModal() {
      document.getElementById('welcome-modal').style.display = 'none';
      localStorage.setItem("seenCharlieWelcome", "1");
    }
    // Show welcome modal for first-time visitors
    if (!localStorage.getItem("seenCharlieWelcome")) {
      setTimeout(showModal, 800);
    }
    // DATA:
    const secrets = {
      MK: [
        {emoji:"üíç", name:"Find the Haunted Mansion ring in the pavement", desc:"Liberty Square"},
        {emoji:"‚ú®", name:"Get 'pixie dusted' at Sir Mickey's", desc:"Behind the castle"},
        {emoji:"üê´", name:"Get sprayed by the camel at Aladdin's Magic Carpets", desc:"Adventureland"},
        {emoji:"üïØÔ∏è", name:"Pose for lantern photos at Tangled bathrooms & look for hidden Pascals", desc:"Near Rapunzel tower"},
        {emoji:"üí¶", name:"Notice the brown 'sewage line' in Liberty Square", desc:"A historical detail!"},
        {emoji:"üîî", name:"Listen in Tomorrowland Power & Light phone booths", desc:"Hear a secret call"},
        {emoji:"üè∞", name:"Make a wish at Cinderella's Wishing Well", desc:"Right of the castle"},
        {emoji:"üìû", name:"Pick up the phone at City Hall for a surprise", desc:"Main Street"},
        {emoji:"üì∏", name:"Ask for a Photopass 'magic shot'", desc:"Try waving or asking!"},
        {emoji:"üåà", name:"Watch the 'Kiss Goodnight' at closing", desc:"Castle lights farewell"},
        {emoji:"üéπ", name:"Listen to live piano at Casey‚Äôs Corner", desc:"Ragtime on Main Street"},
        {emoji:"üóùÔ∏è", name:"Ask about the 'Keys to the Kingdom' tour", desc:"Only for superfans"},
        {emoji:"ü¶¥", name:"Look for the talking trash can (Push!)", desc:"Tomorrowland (sometimes appears)"},
        {emoji:"üê∂", name:"Spot the 'Smiling Dog' in Pirates of the Caribbean", desc:"The one with keys in his mouth!"}
      ],
      EPCOT: [
        {emoji:"ü•§", name:"Try every soda at Club Cool (even Beverly)", desc:"Near Creations Shop"},
        {emoji:"üöá", name:"Snap a photo at the Bubblegum Wall", desc:"Exit of Spaceship Earth"},
        {emoji:"üöÉ", name:"Find a hidden Mickey in Germany's train garden", desc:"World Showcase"},
        {emoji:"‚õ≤", name:"Notice the 'burning Rome' scent in Spaceship Earth", desc:"During the fire scene"},
        {emoji:"üå∏", name:"Explore Morocco‚Äôs quiet back alleys", desc:"So many details!"},
        {emoji:"üé§", name:"Enjoy Voices of Liberty a cappella", desc:"American Adventure rotunda"},
        {emoji:"üé°", name:"See night lights on Spaceship Earth", desc:"'Beacons of Magic' show"},
        {emoji:"üçß", name:"Eat School Bread in Norway", desc:"Bakery in Norway pavilion"},
        {emoji:"üç¶", name:"Try a macaron ice cream sandwich", desc:"France pavilion"},
        {emoji:"üîé", name:"Spot a hidden Mickey in Living with the Land", desc:"Greenhouse scenes"},
        {emoji:"ü•ö", name:"Try a festival scavenger hunt", desc:"Like Remy‚Äôs or Figment‚Äôs!"},
        {emoji:"üóº", name:"Notice the bird-free Eiffel Tower", desc:"Painted with special paint"},
        {emoji:"üé©", name:"Find Dreamfinder references at Imagination Pavilion", desc:"Classic EPCOT fans only!"}
      ],
      HS: [
        {emoji:"‚òÇÔ∏è", name:"Stand under the Singing in the Rain umbrella", desc:"Pull the handle near Echo Lake"},
        {emoji:"üé∏", name:"See the Tower of Terror neon at night", desc:"Perfect spooky photo"},
        {emoji:"üê¶", name:"See dino Gertie by Echo Lake", desc:"Classic Disney dinosaur!"},
        {emoji:"üé•", name:"See droids in Galaxy‚Äôs Edge", desc:"Check near shops and doors"},
        {emoji:"üåü", name:"Watch Fantasmic! or Indiana Jones", desc:"Epic live shows"},
        {emoji:"üöÇ", name:"See Walt‚Äôs model train car in One Man‚Äôs Dream", desc:"History lovers only"},
        {emoji:"üçø", name:"Try all flavors at Kat Saka‚Äôs Kettle", desc:"Colorful Star Wars popcorn"},
        {emoji:"üíº", name:"Find Walt‚Äôs office window", desc:"Look for his name in the windows"},
        {emoji:"ü•ì", name:"Eat Totchos at Woody‚Äôs Lunch Box", desc:"Potato barrel + chili cheese"},
        {emoji:"üç™", name:"Get a Jack-Jack‚Äôs Num Num Cookie", desc:"Super gooey, Pixar Place"}
      ],
      AK: [
        {emoji:"ü¶ñ", name:"Take a selfie with Dino Sue", desc:"Near DINOSAUR entrance"},
        {emoji:"üå±", name:"See DiVine, the living plant", desc:"Path from Africa to Asia"},
        {emoji:"üé≠", name:"Enjoy Festival of the Lion King", desc:"Fantastic live show"},
        {emoji:"ü¶ç", name:"Walk the Gorilla Falls or Maharajah Jungle Trek", desc:"See gorillas and tigers"},
        {emoji:"üîç", name:"Try the Wilderness Explorer game", desc:"Collect badges all over"},
        {emoji:"üí¶", name:"Drink a Night Blossom slush in Pandora", desc:"Tastes as wild as it looks!"},
        {emoji:"üî•", name:"See Tree of Life Awakenings at night", desc:"Projections on the tree"},
        {emoji:"üçü", name:"Eat Mr. Kamal‚Äôs seasoned fries", desc:"Asia, legendary snack"},
        {emoji:"ü¶ò", name:"Watch kangaroos by Tree of Life", desc:"Morning is best"},
        {emoji:"‚õ∞Ô∏è", name:"Spot the Yeti Shrine at Everest", desc:"Near the ride entrance"},
        {emoji:"ü¶ï", name:"Listen for dinosaur sounds outside DINOSAUR", desc:"Hidden speakers!"}
      ],
      USF: [
        {emoji:"üêç", name:"See Kreacher peek from 12 Grimmauld Place", desc:"Knock, watch the window"},
        {emoji:"üìû", name:"Dial 'MAGIC' at the red phone booth", desc:"Dial 62442 for a secret!"},
        {emoji:"üêâ", name:"Watch the dragon breathe fire over Gringotts", desc:"Every 10-15 minutes"},
        {emoji:"üßô", name:"Chat with the Knight Bus shrunken head", desc:"It talks!"},
        {emoji:"ü¶ë", name:"Spot the Jaws shark & movie tributes", desc:"San Francisco & Diagon Alley"},
        {emoji:"üöÄ", name:"Use single rider for Escape from Gringotts", desc:"Beat the lines!"},
        {emoji:"üéüÔ∏è", name:"See E.T.'s passport Easter egg in the queue", desc:"A tribute to the movie"},
        {emoji:"ü•§", name:"Try Butterbeer as frozen, hot, or ice cream", desc:"Diagon Alley"},
        {emoji:"üéÆ", name:"Try a secret wand spell", desc:"Ask for a hint!"},
        {emoji:"üëæ", name:"Spot hidden Minions in the park", desc:"Look up in the gift shops!"}
      ],
      IOA: [
        {emoji:"ü¶ñ", name:"Watch Blue the Raptor at Jurassic Park", desc:"Photo ops through the day"},
        {emoji:"üêç", name:"Request the Men in Black Immigration Room tour", desc:"If you catch staff in a good mood!"},
        {emoji:"üê≤", name:"Try Butterbeer or pumpkin juice at Three Broomsticks", desc:"Or sticky toffee pudding!"},
        {emoji:"üëª", name:"Listen for Moaning Myrtle in Hogsmeade bathrooms", desc:"Harry Potter fans only!"},
        {emoji:"üé¢", name:"Ride front row on Hulk or VelociCoaster", desc:"Top thrill!"},
        {emoji:"ü¶Ñ", name:"See a house elf in a Hogsmeade shop window", desc:"Look up for moving elves!"},
        {emoji:"üö™", name:"Try the secret knock in Knockturn Alley", desc:"Watch what happens!"},
        {emoji:"üçà", name:"Ask about the Olive at Popeye ride", desc:"A quirky prop fact!"}
      ],
      EU: [
        {emoji:"üåå", name:"Walk the gardens of Celestial Park", desc:"Relax and people-watch"},
        {emoji:"üçÑ", name:"Ride Mario Kart: Bowser's Challenge", desc:"Super Nintendo World"},
        {emoji:"üêâ", name:"See Toothless in Isle of Berk", desc:"How to Train Your Dragon area"},
        {emoji:"üé©", name:"Tour the Ministry of Magic", desc:"Brand new for Harry Potter fans"},
        {emoji:"üëª", name:"Check out Frankenstein‚Äôs Dark Universe", desc:"Classic monsters meet the future!"}
      ]
    };
    const rides = {
      MK: {
        fantasy: [
          {emoji:"‚õèÔ∏è", name:"Seven Dwarfs Mine Train"},
          {emoji:"üåä", name:"Tiana's Bayou Adventure (Log Flume)"},
          {emoji:"üåç", name:"It's a Small World"}
        ],
        frontier: [
          {emoji:"üöÇ", name:"Big Thunder Mountain Railroad"}
        ],
        adventure: [
          {emoji:"ü¶ú", name:"Jungle Cruise"},
          {emoji:"üè¥‚Äç‚ò†Ô∏è", name:"Pirates of the Caribbean"}
        ],
        liberty: [
          {emoji:"üëª", name:"Haunted Mansion"}
        ],
        tomorrow: [
          {emoji:"üèçÔ∏è", name:"TRON Lightcycle Run"}
        ]
      },
      HS: {
        sw: [
          {emoji:"‚≠ê", name:"Star Wars: Rise of the Resistance"},
          {emoji:"üöÄ", name:"Millennium Falcon: Smugglers Run"}
        ],
        toy: [
          {emoji:"üê∂", name:"Slinky Dog Dash"}
        ],
        sunset: [
          {emoji:"üè®", name:"Tower of Terror"}
        ]
      },
      AK: {
        pandora: [
          {emoji:"ü¶ã", name:"Avatar Flight of Passage"},
          {emoji:"üõ∂", name:"Na'vi River Journey"}
        ],
        africa: [
          {emoji:"ü¶Å", name:"Kilimanjaro Safaris"}
        ],
        asia: [
          {emoji:"‚õ∞Ô∏è", name:"Expedition Everest"},
          {emoji:"üåä", name:"Kali River Rapids"}
        ],
        dino: [
          {emoji:"ü¶ñ", name:"DINOSAUR"}
        ]
      },
      EPCOT: {
        discovery: [
          {emoji:"üöÄ", name:"Guardians of the Galaxy: Cosmic Rewind"}
        ],
        test: [
          {emoji:"üèéÔ∏è", name:"Test Track"}
        ]
      },
      USF: {
        diagon: [
          {emoji:"üêâ", name:"Harry Potter and the Escape from Gringotts"}
        ],
        hogwarts: [
          {emoji:"üöÇ", name:"Hogwarts Express"}
        ]
      },
      IOA: {
        jurassic: [
          {emoji:"üé¢", name:"Jurassic World VelociCoaster"},
          {emoji:"üö§", name:"Jurassic Park River Adventure"}
        ],
        hogsmeade: [
          {emoji:"üèçÔ∏è", name:"Hagrid's Magical Creatures Motorbike Adventure"},
          {emoji:"üßô‚Äç‚ôÇÔ∏è", name:"Harry Potter and the Forbidden Journey"}
        ]
      },
      EU: {
        celestial: [
          {emoji:"üöó", name:"Starfall Racers"}
        ],
        ministry: [
          {emoji:"üé©", name:"Harry Potter and the Ministry of Magic"}
        ],
        snw: [
          {emoji:"üèéÔ∏è", name:"Bowser‚Äôs Challenge"},
          {emoji:"‚õèÔ∏è", name:"Minecart Madness"}
        ],
        berk: [
          {emoji:"üêâ", name:"Hiccup‚Äôs Wing Gliders"},
          {emoji:"üê≤", name:"Dragon Racer Rally"}
        ]
      }
    };
    const parkList = ["MK","EPCOT","HS","AK","USF","IOA","EU"];
    const saved = JSON.parse(localStorage.getItem("hiddenParkFullScreenCharlieRides") || "{}");
    const waitTimes = {
      "Pirates of the Caribbean": {morning: 20, afternoon: 40, evening: 25},
      "Haunted Mansion": {morning: 15, afternoon: 35, evening: 20},
      "Avatar Flight of Passage": {morning: 60, afternoon: 90, evening: 40},
      "Harry Potter and the Forbidden Journey": {morning: 30, afternoon: 45, evening: 25},
      "Bowser‚Äôs Challenge": {morning: 40, afternoon: 70, evening: 35}
    };
    const rainyTips = [
      "Pirates of the Caribbean is a great indoor escape.",
      "Catch Festival of the Lion King to stay dry.",
      "Harry Potter and the Forbidden Journey keeps you out of the rain."
    ];
    const foods = [
      {emoji:"üçç", name:"Dole Whip", park:"MK", type:"sweet"},
      {emoji:"ü•ê", name:"Cheshire Cat Tail", park:"MK", type:"sweet"},
      {emoji:"ü•®", name:"Mickey Pretzel", park:"MK", type:"savory"},
      {emoji:"ü•ü", name:"Cheeseburger Spring Roll", park:"MK", type:"savory"},
      {emoji:"üå≠", name:"Corn Dog Nuggets", park:"MK", type:"savory"},
      {emoji:"üçé", name:"LeFou‚Äôs Brew", park:"MK", type:"drink"},

      {emoji:"üçû", name:"School Bread", park:"EPCOT", type:"sweet"},
      {emoji:"üç¶", name:"Macaron Ice Cream Sandwich", park:"EPCOT", type:"sweet"},
      {emoji:"üç∞", name:"Funnel Cake", park:"EPCOT", type:"sweet"},
      {emoji:"üçø", name:"Caramel Popcorn", park:"EPCOT", type:"sweet"},
      {emoji:"üçπ", name:"Margaritas", park:"EPCOT", type:"drink"},
      {emoji:"ü•É", name:"Beverly", park:"EPCOT", type:"drink"},

      {emoji:"üåØ", name:"Ronto Wrap", park:"HS", type:"savory"},
      {emoji:"üç™", name:"Num Num Cookie", park:"HS", type:"sweet"},
      {emoji:"ü•î", name:"Totchos", park:"HS", type:"savory"},
      {emoji:"ü•õ", name:"Blue/Green Milk", park:"HS", type:"drink"},
      {emoji:"ü•ï", name:"Carrot Cake Cookie", park:"HS", type:"sweet"},

      {emoji:"üßÉ", name:"Night Blossom Slush", park:"AK", type:"drink"},
      {emoji:"üçü", name:"Mr. Kamal‚Äôs Fries", park:"AK", type:"savory"},
      {emoji:"üßÄ", name:"Pulled Pork Mac and Cheese", park:"AK", type:"savory"},
      {emoji:"üåΩ", name:"Grilled Corn on the Cob", park:"AK", type:"savory"},
      {emoji:"ü¶Å", name:"Simba Pretzel", park:"AK", type:"savory"},

      {emoji:"üç∫", name:"Butterbeer", park:"USF", type:"drink"},
      {emoji:"üéÉ", name:"Pumpkin Juice", park:"USF", type:"drink"},
      {emoji:"üü¢", name:"Fishy Green Ale", park:"USF", type:"drink"},
      {emoji:"üç©", name:"Lard Lad Donut", park:"USF", type:"sweet"},
      {emoji:"üî•", name:"Moe‚Äôs Flaming Moe", park:"USF", type:"drink"},

      {emoji:"üçß", name:"Frozen Butterbeer", park:"IOA", type:"drink"},
      {emoji:"ü•ü", name:"Pumpkin Pasties", park:"IOA", type:"sweet"},
      {emoji:"üçó", name:"Giant Turkey Leg", park:"IOA", type:"savory"},
      {emoji:"ü•ñ", name:"Churros", park:"IOA", type:"sweet"},

      {emoji:"üçÑ", name:"Toadstool Caf√© Treats", park:"EU", type:"sweet"},
      {emoji:"üßô", name:"Wizarding World Drinks", park:"EU", type:"drink"},
      {emoji:"üê≤", name:"Dragon Fruit Sorbet", park:"EU", type:"sweet"}
    ];
    // Render secrets (Cool Hidden Stuff)
    parkList.forEach(park => {
      const grid = document.getElementById(park + "-secrets");
      secrets[park].forEach((s, idx) => {
        const key = `${park}-secret-${idx}`;
        const card = document.createElement("div");
        card.className = "secret-card glass-card" + (saved[key] ? " done" : "");
        card.innerHTML = `
          <div class="card-content">
            <span class="card-emoji">${s.emoji}</span>
            <div class="card-info">
              <div class="card-name">${s.name}</div>
              <div class="card-desc">${s.desc}</div>
            </div>
            <span class="tick">‚úîÔ∏è</span>
          </div>`;
        card.onclick = function(e) {
          card.classList.toggle("done");
          saved[key] = card.classList.contains("done");
          localStorage.setItem("hiddenParkFullScreenCharlieRides", JSON.stringify(saved));
        };
        grid.appendChild(card);
      });
    });
    // Render rides by area (Must-Do Rides)
    function renderRides(park, area, gridId) {
      const rideArr = (rides[park] && rides[park][area]) || [];
      const grid = document.getElementById(gridId);
      rideArr.forEach((ride, idx) => {
        const key = `${park}-ride-${area}-${idx}`;
        const card = document.createElement("div");
        card.className = "ride-card glass-card" + (saved[key] ? " done" : "");
        card.innerHTML = `
          <div class="card-content">
            <span class="card-emoji">${ride.emoji}</span>
            <div class="card-info">
              <div class="card-name">${ride.name}</div>
            </div>
            <span class="tick">‚úîÔ∏è</span>
          </div>`;
        card.onclick = function(e) {
          card.classList.toggle("done");
          saved[key] = card.classList.contains("done");
          localStorage.setItem("hiddenParkFullScreenCharlieRides", JSON.stringify(saved));
        };
        grid.appendChild(card);
      });
    }
    function renderFoods() {
      const grid = document.getElementById('food-grid');
      grid.innerHTML = '';
      foods.forEach((f, idx) => {
        const key = `food-${idx}`;
        const favKey = `fav-food-${idx}`;
        const card = document.createElement('div');
        card.className = 'ride-card glass-card' +
          (saved[key] ? ' done' : '') + (saved[favKey] ? ' favorite' : '');
        card.dataset.name = f.name;
        card.dataset.type = f.type;
        card.innerHTML = `
          <span class="fav">‚òÖ</span>
          <div class="card-content">
            <span class="card-emoji">${f.emoji}</span>
            <div class="card-info">
              <div class="card-name">${f.name}</div>
            </div>
            <span class="tick">‚úîÔ∏è</span>
          </div>`;
        const star = card.querySelector('.fav');
        star.onclick = function(e){
          e.stopPropagation();
          card.classList.toggle('favorite');
          saved[favKey] = card.classList.contains('favorite');
          localStorage.setItem('hiddenParkFullScreenCharlieRides', JSON.stringify(saved));
        };
        card.onclick = function(){
          card.classList.toggle('done');
          saved[key] = card.classList.contains('done');
          localStorage.setItem('hiddenParkFullScreenCharlieRides', JSON.stringify(saved));
        };
        grid.appendChild(card);
      });
      filterFoods();
    }

    function filterFoods() {
      const q = document.getElementById('food-search').value.toLowerCase();
      const type = document.getElementById('food-filter').value;
      document.querySelectorAll('#food-grid .ride-card').forEach(card => {
        const matchType = type === 'all' || card.dataset.type === type;
        const matchSearch = card.dataset.name.toLowerCase().includes(q);
        card.style.display = matchType && matchSearch ? '' : 'none';
      });
    }
    // Magic Kingdom
    renderRides("MK", "fantasy", "MK-rides-fantasy");
    renderRides("MK", "frontier", "MK-rides-frontier");
    renderRides("MK", "adventure", "MK-rides-adventure");
    renderRides("MK", "liberty", "MK-rides-liberty");
    renderRides("MK", "tomorrow", "MK-rides-tomorrow");
    // Hollywood Studios
    renderRides("HS", "sw", "HS-rides-sw");
    renderRides("HS", "toy", "HS-rides-toy");
    renderRides("HS", "sunset", "HS-rides-sunset");
    // Animal Kingdom
    renderRides("AK", "pandora", "AK-rides-pandora");
    renderRides("AK", "africa", "AK-rides-africa");
    renderRides("AK", "asia", "AK-rides-asia");
    renderRides("AK", "dino", "AK-rides-dino");
    // EPCOT
    renderRides("EPCOT", "discovery", "EPCOT-rides-discovery");
    renderRides("EPCOT", "test", "EPCOT-rides-test");
    // Universal Studios
    renderRides("USF", "diagon", "USF-rides-diagon");
    renderRides("USF", "hogwarts", "USF-rides-hogwarts");
    // Islands of Adventure
    renderRides("IOA", "jurassic", "IOA-rides-jurassic");
    renderRides("IOA", "hogsmeade", "IOA-rides-hogsmeade");
    // Epic Universe
    renderRides("EU", "celestial", "EU-rides-celestial");
    renderRides("EU", "ministry", "EU-rides-ministry");
    renderRides("EU", "snw", "EU-rides-snw");
    renderRides("EU", "berk", "EU-rides-berk");
    renderFoods();
    document.getElementById('food-search').addEventListener('input', filterFoods);
    document.getElementById('food-filter').addEventListener('change', filterFoods);

    function getTimeSlot() {
      const h = new Date().getHours();
      return h < 12 ? 'morning' : h < 17 ? 'afternoon' : 'evening';
    }

    function populatePlanner() {
      const list = document.getElementById('planner-list');
      list.innerHTML = '';
      const slot = getTimeSlot();
      const items = [];
      parkList.forEach(p => {
        if (rides[p]) {
          Object.values(rides[p]).forEach(arr => arr.forEach(r => items.push(r)));
        }
        if (secrets[p]) { secrets[p].forEach(s => items.push(s)); }
      });
      items.forEach(obj => {
        const w = waitTimes[obj.name] ? waitTimes[obj.name][slot] : null;
        const el = document.createElement('div');
        el.className = 'planner-item';
        el.draggable = true;
        el.dataset.name = obj.name;
        el.innerHTML = `<span>${obj.emoji}</span><span>${obj.name}</span><span class="wait">${w ? w + 'm' : ''}</span>`;
        el.addEventListener('dragstart', e => {
          e.dataTransfer.setData('text/plain', obj.name);
        });
        list.appendChild(el);
      });
      loadSchedule();
    }

    function loadSchedule() {
      const sched = JSON.parse(localStorage.getItem('dayPlan') || '{}');
      ['morning','afternoon','evening'].forEach(slot => {
        const zone = document.getElementById('slot-'+slot);
        if (!zone) return;
        zone.innerHTML = '';
        (sched[slot] || []).forEach(name => {
          const w = waitTimes[name] ? waitTimes[name][slot] : null;
          const div = document.createElement('div');
          div.className = 'planner-item';
          div.textContent = name;
          if (w) {
            const span = document.createElement('span');
            span.className = 'wait';
            span.textContent = w + 'm';
            div.appendChild(span);
          }
          zone.appendChild(div);
        });
      });
    }

    function addToSchedule(slot, name) {
      const sched = JSON.parse(localStorage.getItem('dayPlan') || '{}');
      sched[slot] = sched[slot] || [];
      sched[slot].push(name);
      localStorage.setItem('dayPlan', JSON.stringify(sched));
      loadSchedule();
    }

    document.querySelectorAll('.dropzone').forEach(zone => {
      zone.addEventListener('dragover', e => e.preventDefault());
      zone.addEventListener('drop', e => {
        e.preventDefault();
        const name = e.dataTransfer.getData('text/plain');
        const slot = zone.id.replace('slot-','');
        addToSchedule(slot, name);
      });
    });

    function initWeatherTips() {
      document.getElementById('weather-select').addEventListener('change', showWeatherTips);
      showWeatherTips();
    }
    function showWeatherTips() {
      const val = document.getElementById('weather-select').value;
      const list = document.getElementById('weather-tips');
      list.innerHTML = '';
      if (val === 'rainy') {
        rainyTips.forEach(t => {
          const li = document.createElement('li');
          li.textContent = t;
          list.appendChild(li);
        });
      }
    }
    function resetProgress() {
      localStorage.removeItem("hiddenParkFullScreenCharlieRides");
      localStorage.removeItem("seenCharlieWelcome");
      location.reload();
    }
  </script>
</body>
</html>







